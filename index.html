<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visitor Parking Checklist</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #e9f5e9;
  margin: 0;
  padding: 12px;
}
h2 {
  text-align: center;
  color: #176B39;
  margin-bottom: 10px;
}
.card {
  background: #fff;
  border-radius: 12px;
  padding: 14px;
  box-shadow: 0 4px 10px rgba(0,0,0,.1);
  max-width: 420px;
  margin: auto;
}
label {
  font-weight: bold;
  font-size: 13px;
  display: block;
  margin-top: 10px;
}
select, input {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  border-radius: 8px;
  border: 1px solid #ccc;
  margin-top: 5px;
}
button {
  width: 100%;
  margin-top: 16px;
  padding: 14px;
  font-size: 16px;
  border-radius: 10px;
  border: none;
  background: linear-gradient(90deg,#41e671,#176B39);
  color: white;
  font-weight: bold;
}
button:active {
  transform: scale(0.98);
}
.status {
  text-align: center;
  margin-top: 10px;
  font-size: 14px;
}
.footer {
  text-align: center;
  font-size: 11px;
  color: #666;
  margin-top: 8px;
}
</style>
</head>

<body>

<h2>VISITOR PARKING</h2>

<div class="card">

  <label>ROUND TIME</label>
  <select id="round">
    <option value="">-- SELECT --</option>
    <option>08:00</option>
    <option>11:00</option>
    <option>14:00</option>
    <option>17:00</option>
    <option>20:00</option>
    <option>23:00</option>
    <option>02:00</option>
    <option>05:00</option>
  </select>

  <label>LOT</label>
  <select id="lot"></select>

  <label>NO PLATE</label>
  <input id="plate" placeholder="ABC1234" autocomplete="off">

  <button onclick="submitData()">SUBMIT</button>

  <div class="status" id="status"></div>

</div>

<div class="footer">
Powered by Visitor Parking System
</div>

<script>
const WORKER_URL = "https://YOUR-WORKER-URL-HERE";

const lotSelect = document.getElementById("lot");
for (let i = 1; i <= 33; i++) {
  const num = i.toString().padStart(2,"0");
  lotSelect.innerHTML += `<option>GV${num}</option>`;
}

const plateInput = document.getElementById("plate");
plateInput.addEventListener("input", () => {
  plateInput.value = plateInput.value
    .toUpperCase()
    .replace(/[^A-Z0-9]/g,"");
});

async function submitData() {
  const round = document.getElementById("round").value;
  const lot   = lotSelect.value;
  const plate = plateInput.value.trim();
  const status = document.getElementById("status");

  if (!round || !plate) {
    status.innerHTML = "⚠️ PLEASE COMPLETE ALL FIELDS";
    status.style.color = "red";
    return;
  }

  status.innerHTML = "⏳ SUBMITTING...";
  status.style.color = "#333";

  try {
    const res = await fetch(WORKER_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        round,
        lot,
        plate
      })
    });

    const data = await res.json();

    status.innerHTML =
      `✅ SAVED<br>
       HOURS: ${data.elapsedHours}h<br>
       CHARGE: RM${data.charge}`;
    status.style.color = "green";

    plateInput.value = "";
    plateInput.focus();

  } catch (e) {
    status.innerHTML = "❌ ERROR SUBMITTING DATA";
    status.style.color = "red";
  }
}
</script>

</body>
</html>
